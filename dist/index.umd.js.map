{"version":3,"file":"index.umd.js","sources":["../src/JwtAuthClient.js","../src/react/AuthContext.js"],"sourcesContent":["export class JwtAuthClient {\n    constructor(options = {}) {\n        this.storage = options.storage || window.localStorage;\n        this.accessTokenKey = options.accessTokenKey || 'jwt_access_token';\n        this.refreshTokenKey = options.refreshTokenKey || 'jwt_refresh_token';\n        this.onRefresh = options.onRefresh || null; // User-provided function to call refresh API\n    }\n\n    /**\n     * Saves the tokens to the configured storage.\n     * @param {string} accessToken - The access JWT string.\n     * @param {string} [refreshToken] - The optional refresh JWT string.\n     */\n    login(accessToken, refreshToken) {\n        if (typeof accessToken !== 'string' || accessToken.split('.').length !== 3) {\n            console.error('Invalid Access Token provided to login method.');\n            return;\n        }\n        this.storage.setItem(this.accessTokenKey, accessToken);\n        if (refreshToken) {\n            this.storage.setItem(this.refreshTokenKey, refreshToken);\n        }\n    }\n\n    /**\n     * Removes tokens from storage.\n     */\n    logout() {\n        this.storage.removeItem(this.accessTokenKey);\n        this.storage.removeItem(this.refreshTokenKey);\n    }\n\n    /**\n     * Retrieves the raw access token from storage.\n     * @returns {string|null} The access token string or null if not found.\n     */\n    getAccessToken() {\n        return this.storage.getItem(this.accessTokenKey);\n    }\n\n    /**\n     * Retrieves the raw refresh token from storage.\n     * @returns {string|null} The refresh token string or null if not found.\n     */\n    getRefreshToken() {\n        return this.storage.getItem(this.refreshTokenKey);\n    }\n\n    /**\n     * Decodes the access token payload.\n     * @returns {object|null} The decoded payload object or null if token is invalid/missing.\n     */\n    getPayload() {\n        const token = this.getAccessToken();\n        if (!token) return null;\n\n        try {\n            const payloadBase64 = token.split('.')[1];\n            const decodedJson = atob(payloadBase64.replace(/-/g, '+').replace(/_/g, '/'));\n            return JSON.parse(decodedJson);\n        } catch (error) {\n            console.error('Failed to decode JWT payload:', error);\n            return null;\n        }\n    }\n\n    /**\n     * Checks if the access token is expired.\n     * @returns {boolean} True if the token is expired or doesn't exist.\n     */\n    isAccessTokenExpired() {\n        const payload = this.getPayload();\n        if (!payload || typeof payload.exp !== 'number') {\n            return true;\n        }\n        const nowInSeconds = Math.floor(Date.now() / 1000);\n        return nowInSeconds > payload.exp;\n    }\n\n    /**\n     * Checks if a valid, non-expired access token exists.\n     * @returns {boolean} True if authenticated, false otherwise.\n     */\n    isAuthenticated() {\n        return !this.isAccessTokenExpired();\n    }\n\n    /**\n     * Attempts to refresh the access token using the stored refresh token.\n     * @returns {Promise<boolean>} True if refresh was successful, false otherwise.\n     */\n    async refreshAccessToken() {\n        if (!this.onRefresh || typeof this.onRefresh !== 'function') {\n            console.error('onRefresh function not configured. Cannot refresh token.');\n            return false;\n        }\n\n        const refreshToken = this.getRefreshToken();\n        if (!refreshToken) {\n            console.log('No refresh token available.');\n            return false;\n        }\n\n        try {\n            const { newAccessToken, newRefreshToken } = await this.onRefresh(refreshToken);\n            if (!newAccessToken) {\n                throw new Error(\"Refresh call did not return a new access token.\");\n            }\n            this.login(newAccessToken, newRefreshToken); // Store new tokens\n            return true;\n        } catch (error) {\n            console.error('Failed to refresh token:', error);\n            // If refresh fails (e.g., refresh token is also expired), log the user out.\n            this.logout();\n            return false;\n        }\n    }\n}","import { createContext, useState, useEffect, useMemo, useCallback, useContext } from 'react';\nimport { JwtAuthClient } from '../JwtAuthClient';\n\nconst AuthContext = createContext(null);\n\nexport function AuthProvider({ children, config }) {\n    const authClient = useMemo(() => new JwtAuthClient(config), [config]);\n\n    const [accessToken, setAccessToken] = useState(authClient.getAccessToken());\n    const [loading, setLoading] = useState(true);\n    const [isRefreshing, setIsRefreshing] = useState(false);\n\n    // Initial check on component mount\n    useEffect(() => {\n        const initializeAuth = async () => {\n            if (authClient.isAccessTokenExpired()) {\n                const refreshToken = authClient.getRefreshToken();\n                if (refreshToken) {\n                    setIsRefreshing(true);\n                    const success = await authClient.refreshAccessToken();\n                    if (success) {\n                        setAccessToken(authClient.getAccessToken());\n                    }\n                }\n            }\n            setLoading(false);\n            setIsRefreshing(false);\n        };\n        initializeAuth();\n    }, [authClient]);\n\n    const isAuthenticated = useMemo(() => !!accessToken && !authClient.isAccessTokenExpired(), [accessToken, authClient]);\n    const userPayload = useMemo(() => isAuthenticated ? authClient.getPayload() : null, [isAuthenticated, authClient]);\n\n    const login = useCallback((newAccessToken, newRefreshToken) => {\n        authClient.login(newAccessToken, newRefreshToken);\n        setAccessToken(newAccessToken);\n    }, [authClient]);\n\n    const logout = useCallback(() => {\n        authClient.logout();\n        setAccessToken(null);\n    }, [authClient]);\n\n    const refreshAccessToken = useCallback(async () => {\n        setIsRefreshing(true);\n        const success = await authClient.refreshAccessToken();\n        if (success) {\n            setAccessToken(authClient.getAccessToken());\n        }\n        setIsRefreshing(false);\n        return success;\n    }, [authClient]);\n\n    const value = useMemo(() => ({\n        isAuthenticated,\n        userPayload,\n        accessToken,\n        login,\n        logout,\n        loading,\n        isRefreshing,\n        refreshAccessToken,\n    }), [isAuthenticated, userPayload, accessToken, login, logout, loading, isRefreshing, refreshAccessToken]);\n\n    return (\n        <AuthContext.Provider value={value}>\n            {children}\n        </AuthContext.Provider>\n    );\n}\n\nexport function useAuth() {\n    const context = useContext(AuthContext);\n    if (context === null) {\n        throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n}"],"names":["JwtAuthClient","options","arguments","length","undefined","_classCallCheck","storage","window","localStorage","accessTokenKey","refreshTokenKey","onRefresh","_createClass","key","value","login","accessToken","refreshToken","split","console","error","setItem","logout","removeItem","getAccessToken","getItem","getRefreshToken","getPayload","token","payloadBase64","decodedJson","atob","replace","JSON","parse","isAccessTokenExpired","payload","exp","nowInSeconds","Math","floor","Date","now","isAuthenticated","_refreshAccessToken","_asyncToGenerator","_regenerator","m","_callee","_yield$this$onRefresh","newAccessToken","newRefreshToken","_t","w","_context","n","a","log","p","v","Error","refreshAccessToken","apply","AuthContext","createContext","AuthProvider","_ref","children","config","authClient","useMemo","_useState","useState","_useState2","_slicedToArray","setAccessToken","_useState3","_useState4","loading","setLoading","_useState5","_useState6","isRefreshing","setIsRefreshing","useEffect","initializeAuth","_ref2","success","userPayload","useCallback","_callee2","_context2","_jsx","Provider","useAuth","context","useContext"],"mappings":"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"}